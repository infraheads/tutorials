podTemplate(
    containers: [
        containerTemplate (
            name: "kaniko",
            image: "gcr.io/kaniko-project/executor:debug",
            command: "sleep",
            args: "99999"
        )],
    volumes: [
        secretVolume( 
            mountPath: '/kaniko/.docker', 
            secretName: 'docker-config'
          )
        ]
      )
      {
        node (POD_LABEL) {
            stage("Get a demo project") {
                git url: "https://github.com/fortranhub/demo.git", branch: "main"
                container(name: 'kaniko', shell: '/busybox/sh') {
                    stage("Build a demo project") {
                        sh '''#!/busybox/sh
                            /kaniko/executor --dockerfile="./Dockerfile" --context=`pwd` --destination="hakobmkoyan771/golang:latest"
                        '''
                    }
                }
            }
        }
    }
